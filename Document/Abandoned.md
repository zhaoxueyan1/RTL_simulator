<!-- # RTL仿真系统体系结构分析

## 1. 需求分析

### 1.1 功能需求

#### 1.1.1 用例分析

- 安装: 提供编译脚本以用于Linux环境编译安装
- 输入与定制：可以使用CLI对输入进行参数定制
- 功能点：
  - 能对RLT级描述的HDL语言进行仿真
  - 提供verification procedural interface (VPI)的子集以供验证
- 输出：可输出VCD格式的波形文件

### 1.2 非功能需求

#### 1.2.1 性能需求

- 响应时间约束：对于千万门级规模的电路仿真时间，单cycle不应当低于300ms
<!-- - 吞吐量: -->
<!-- - 资源利用率: Initial版本跑在CPU上，对于所有核的平均占有率不应当低于70%
- 关键体系结构特性利用: 
    - SIMD
    - Cache layout
    - Parallel
    - GPGPU

#### 1.2.2 安全性需求

- 内存安全：
  - 在千万门级电路仿真时应当预先计算内存开销为用户做出警告，不应当在运行时程序崩溃。
  - 不应当访问非法内存。
  - 应当对每个对象的生命周期，作用域，内存进行良好管理防止内存泄漏。

#### 1.2.3 可维护性与可拓展性需求

- 模块化:目前在模块化做的还不够,主要在于代码生成的规范问题。
- 可复用性:组件应当进行统一设计，需要用到的地方可以微调然后调用
- 易分析性:日志系统的简历，对于BUG的追踪。

#### 1.2.4 可靠性需求

- 易恢复性：在发生故障时，重建其性能水平并恢复直接受影响的数据。在本项目中，不存在需要持久化存储的数据，故对易恢复性考虑较少
- 容错性: 
- 成熟型：系统故障率应当保持在一定水平
   
#### 1.2.5 易用性需求

- 用户需要一定的Linux基础，后续增加对MinGW的编译支持。未来需要假如对不同平台的支持如X86-64,MIPS,RISC-V

## 2. 架构设计

采用基于**虚拟机风格**

### 2.1 前端部分-总体架构图

![](./pic/1.png)

### 2.2 后端部分Pipeline

- Parse: 将输入的json格式，处理成我们想要的节点
- Reorder: 依据输入的图连接关系，对所有**组合逻辑**进行reorder。
- Partition: 目前未做,未来将利用**关键Comb节点**进行Partition,使得整个图被切割。加速trans。
- CombTrans: 从comb开始，用队列不断更新，遇到Reg停止。
- Print: 输出所有寄存器的值，并更新寄存器的值，将更新过的寄存器的值放入queue。 --> -->

<!-- - RegSet: 对寄存器赋值并且找到起始的Comb放入queue。 -->
<!-- ## 3 ATAM 评价

### 3.1 风险，非风险

该项目属于非风险项目，不涉及信息的安全问题。

### 3.2 敏感点

本项目的敏感点在于对性能敏感，核心问题是性能的提升

### 3.3 权衡点

本项目的权衡点在于更新Comb时的时间与内存资源的trade-off。 -->